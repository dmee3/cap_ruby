<% content_for :styles do %>
  <%= stylesheet_link_tag 'conflicts', media: 'all' %>
<% end %>

<% content_for :main do %>
  <div class="row">
    <div class="col-md-9">
      <h1 class="white-text">Conflicts</h1>
    </div>
    <div class="col-md-3 text-right-md">
      <%= link_to 'New Conflict', new_conflict_path, class: 'btn btn-light red-text align-middle' %>
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <div class="card" id="conflict-accordion" data-children=".conflict">
        <% @conflicts.each do |conflict| %>
          <div class="conflict conflict-<%= conflict.status.name.downcase %>">
            <div class="card-header" data-toggle="collapse" data-target="#conflict-<%= conflict.id %>-info" data-parent="#conflict-accordion">
              <div class="row">
                <div class="col-12 d-flex justify-content-between">
                  <span>
                    <span><%= conflict.start_date.strftime('%-m/%-d/%y %I:%M %p') %></span> - <span><%= conflict.end_date.strftime('%-m/%-d/%y %I:%M %p') %></span>
                  </span>
                  <span>
                    <a data-toggle="collapse" href="#conflict-reason-<%= conflict.id %>">
                      <%= fa_icon 'comment-o', class: 'dark-text icon-btn icon-btn-blue' %>
                    </a>
                  </span>
                    <span><%= render 'conflict_status_icon', status: conflict.status %></span>
                </div>
              </div>
            </div>

            <% unless conflict.reason.blank? %>
              <div class="collapse white px-5 py-1" id="conflict-reason-<%= conflict.id %>">
                <small class="text-muted"><%= conflict.reason %></small>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
<% end %>